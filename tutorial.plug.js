var b=Object.defineProperty;var v=(e,t)=>{for(var o in t)b(e,o,{get:t[o],enumerable:!0})};var d=typeof window>"u"&&typeof globalThis.WebSocketPair>"u";typeof Deno>"u"&&(self.Deno={args:[],build:{arch:"x86_64"},env:{get(){}}});var p=new Map,l=0;function u(e){self.postMessage(e)}d&&(globalThis.syscall=async(e,...t)=>await new Promise((o,n)=>{l++,p.set(l,{resolve:o,reject:n}),u({type:"sys",id:l,name:e,args:t})}));function f(e,t){d&&(self.addEventListener("message",o=>{(async()=>{let n=o.data;switch(n.type){case"inv":{let i=e[n.name];if(!i)throw new Error(`Function not loaded: ${n.name}`);try{let s=await Promise.resolve(i(...n.args||[]));u({type:"invr",id:n.id,result:s})}catch(s){console.error("An exception was thrown as a result of invoking function",n.name,"error:",s.message),u({type:"invr",id:n.id,error:s.message})}}break;case"sysr":{let i=n.id,s=p.get(i);if(!s)throw Error("Invalid request id");p.delete(i),n.error?s.reject(new Error(n.error)):s.resolve(n.result)}break}})().catch(console.error)}),u({type:"manifest",manifest:t}))}function w(e){let t=atob(e),o=t.length,n=new Uint8Array(o);for(let i=0;i<o;i++)n[i]=t.charCodeAt(i);return n}function g(e){typeof e=="string"&&(e=new TextEncoder().encode(e));let t="",o=e.byteLength;for(let n=0;n<o;n++)t+=String.fromCharCode(e[n]);return btoa(t)}async function A(e,t){if(typeof e!="string"){let o=new Uint8Array(await e.arrayBuffer()),n=o.length>0?g(o):void 0;t={method:e.method,headers:Object.fromEntries(e.headers.entries()),base64Body:n},e=e.url}return syscall("sandboxFetch.fetch",e,t)}globalThis.nativeFetch=globalThis.fetch;function U(){globalThis.fetch=async function(e,t){let o=t&&t.body?g(new Uint8Array(await new Response(t.body).arrayBuffer())):void 0,n=await A(e,t&&{method:t.method,headers:t.headers,base64Body:o});return new Response(n.base64Body?w(n.base64Body):null,{status:n.status,headers:n.headers})}}d&&U();var c={};v(c,{confirm:()=>z,copyToClipboard:()=>pe,dispatch:()=>X,downloadFile:()=>N,filterBox:()=>V,flashNotification:()=>Q,fold:()=>ne,foldAll:()=>se,getCurrentPage:()=>S,getCursor:()=>T,getSelection:()=>K,getText:()=>F,getUiOption:()=>ee,goHistory:()=>G,hidePanel:()=>I,insertAtCursor:()=>Y,insertAtPos:()=>$,moveCursor:()=>J,navigate:()=>E,openCommandPalette:()=>B,openPageNavigator:()=>D,openSearchPanel:()=>le,openUrl:()=>O,prompt:()=>Z,redo:()=>ue,reloadPage:()=>L,reloadSettingsAndCommands:()=>W,reloadUI:()=>q,replaceRange:()=>_,save:()=>k,setPage:()=>C,setSelection:()=>R,setText:()=>M,setUiOption:()=>te,showPanel:()=>H,toggleFold:()=>ie,undo:()=>ce,unfold:()=>oe,unfoldAll:()=>ae,uploadFile:()=>j,vimEx:()=>re});typeof self>"u"&&(self={syscall:()=>{throw new Error("Not implemented here")}});var r=globalThis.syscall;function S(){return r("editor.getCurrentPage")}function C(e){return r("editor.setPage",e)}function F(){return r("editor.getText")}function M(e){return r("editor.setText",e)}function T(){return r("editor.getCursor")}function K(){return r("editor.getSelection")}function R(e,t){return r("editor.setSelection",e,t)}function k(){return r("editor.save")}function E(e,t=!1,o=!1){return r("editor.navigate",e,t,o)}function D(e="page"){return r("editor.openPageNavigator",e)}function B(){return r("editor.openCommandPalette")}function L(){return r("editor.reloadPage")}function q(){return r("editor.reloadUI")}function W(){return r("editor.reloadSettingsAndCommands")}function O(e,t=!1){return r("editor.openUrl",e,t)}function G(e){return r("editor.goHistory",e)}function N(e,t){return r("editor.downloadFile",e,t)}function j(e,t){return r("editor.uploadFile",e,t)}function Q(e,t="info"){return r("editor.flashNotification",e,t)}function V(e,t,o="",n=""){return r("editor.filterBox",e,t,o,n)}function H(e,t,o,n=""){return r("editor.showPanel",e,t,o,n)}function I(e){return r("editor.hidePanel",e)}function $(e,t){return r("editor.insertAtPos",e,t)}function _(e,t,o){return r("editor.replaceRange",e,t,o)}function J(e,t=!1){return r("editor.moveCursor",e,t)}function Y(e){return r("editor.insertAtCursor",e)}function X(e){return r("editor.dispatch",e)}function Z(e,t=""){return r("editor.prompt",e,t)}function z(e){return r("editor.confirm",e)}function ee(e){return r("editor.getUiOption",e)}function te(e,t){return r("editor.setUiOption",e,t)}function re(e){return r("editor.vimEx",e)}function ne(){return r("editor.fold")}function oe(){return r("editor.unfold")}function ie(){return r("editor.toggleFold")}function se(){return r("editor.foldAll")}function ae(){return r("editor.unfoldAll")}function ce(){return r("editor.undo")}function ue(){return r("editor.redo")}function le(){return r("editor.openSearchPanel")}function pe(e){return r("editor.copyToClipboard",e)}async function Fe(){let e=await syscall("editor.getSelection");return console.log("selectedRange:",e),(await syscall("editor.getText")).slice(e.from,e.to)}async function y(){let e=await Fe(),t=await Me(e);await c.flashNotification(t)}async function Me(e){e||(e="John 3:16"),console.log("this scripture => "+e);let t=e.split(" "),o=t[0],n=t[1].split(":")[0],i=t[1].split(":")[1],s='"book":"'+o+'","chapter":"'+n+'","verse":"'+i+'","version":"nlt"',m="https://api.nlt.to/api/passages?ref=john.3.16&key=911881c1-2531-40bb-b382-1202ca9312f2";console.log("url=> "+m);let a=await(await nativeFetch(m,{headers:{"Content-type":"application/json",Accept:"application/json"},mode:"no-cors"})).json();return console.log("data = "+a),await c.flashNotification(a.text),a.text+" _"+a.book+" "+a.chapter+":"+a.verses+" ("+a.version+")_"}async function x(){let e=await fetch("https://jsonplaceholder.typicode.com/users/1");if(e.status<200||e.status>=300)throw new Error(await e.text());let t=await e.json();await c.flashNotification(t.name)}var P={scriptureRef:y,randomuser:x},h={name:"tutorial",requiredPermissions:["fetch"],functions:{scriptureRef:{path:"hello.ts:scriptureRef",command:{name:"Tutorial: Get Scripture Ref"}},randomuser:{path:"hello.ts:randomUser",command:{name:"Tutorial: Get Random User"}}},assets:{}},it={manifest:h,functionMapping:P};f(P,h);export{it as plug};
